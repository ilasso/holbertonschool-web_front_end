<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Task 4</title>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2.2.1/src/js.cookie.min.js"></script>
  </head>
  <body>
    <div id="divform" class="divform">
      <h2>Login to the website</h2>
      <input id="firstname" type="text" name="email" value="Firstname">
      <input id="email" type="text" name="email" value="Email">
      <button type="button" name="buttonlogmein" onclick="setCookiesAndShowWelcomeMessage()">Log me in</button>
    </div>

    <script type="text/javascript">
      function showForm() {
        document.getElementById("#divform").style.display = "block";
      }
      function hideForm() {
        document.getElementById("divform").style.display = "none";
      }
      function deleteCookiesAndShowForm() {
        let h1 = document.getElementById("#h1");
                h1.remove();
                Cookies.remove("firstname")
                Cookies.remove("email")
                showForm();
      }
      function showWelcomeMessageOrForm() {
        let hasfirstname = Cookies.get("firstname");
          if (hasfirstname) {
              hideForm();

              let h1 = document.createElement("h1");
              h1.innerText = `Welcome ${hasfirstname}`;
              h1.setAttribute("id", "#h1");

              let link = document.createElement("a");
              link.setAttribute("onclick", "deleteCookiesAndShowForm()");
              link.innerText = "(logout)";
              link.setAttribute("class", "logout");
              link.setAttribute("style","padding: 10px;font-weight: normal;font-style:italic;font-size")

              h1.appendChild(link);
              document.body.appendChild(h1);


          } else showForm();
      }
      function setCookies() {
        Cookies.set("firstname", document.getElementById("firstname").value, {expires: 10})
        Cookies.set("email", document.getElementById("email").value, {expires: 10})
        }

      function showCookies() {
        let p = document.createElement("p");
        p.innerText = `Email: ${Cookies.get("email")} - Firstname: ${Cookies.get("firstname")}`;
        document.body.appendChild(p);
        }
      function setCookiesAndShowWelcomeMessage() {
        setCookies()
        showWelcomeMessageOrForm()
      }

      showWelcomeMessageOrForm();
    </script>
  </body>
</html>
